# API JSON Objects
PayFabric uses JSON objects to send and receive client data. This is the official reference documentation for JSON objects used in the PayFabric REST API.

## Address
Address objects represent the shipping or billing address of a customer. This object may be included as a child attribute of other JSON objects (such as [Card](#card)).

| Attribute  | Data Type| Definition|
| :-----------|:---------| :---------| 
| ID         | Guid | Unique identifier for this record | 
| Customer*   | String | ID for this customer. This is generated by the client upon creation of the customer. |
| Country*    | String | Country name|  
| State*      | String | State name|  
| City*       | String | City name |
| Line1*      | String | Street line 1 |
| Line2      | String | Street line 2 |
| Line3      | String | Street line 3 |
| Email      | String | Email address|
| Phone      | String | Phone number |
| ModifiedOn | Date   | Timestamp indicating when this record was last modified. |
*Required

## CardHolder
The cardholder object represents the owner of a credit card or eCheck. This object is always included as a child object of the Card object.

PayFabric encrypts the attributes "DriverLicense" and "SSN" before storing them.

| Attribute  | Data Type| Definition
| :-----------|:---------| :---------| 
| DriverLicense   | String | Driver license  | 
| FirstName*      | String | First name |
| LastName*       | String | Last name|  
| MiddleName      | String | Middle name|  
| SSN             | String | Social security number|  
*Required

## Card
The Card object represents a Credit Card or eCheck of a customer.

| Attribute  | DataType  | Definition
| :-----------------|:-------------| :---------| 
| ID              | Guid | Unique identifier for this record. This ID is generated by PayFabric upon successful creation of a new card. The client cannot set or modify this value.  | 
| Tender*          | Options | Tender type. Valid options are ``CreditCard`` or ``ECheck``. |
| Customer*        | String | Customer ID as specified by the client upon creation of the customer. |  
| Account*         | String | The number of the credit card, or the eCheck/ACH account. When creating a new Card this attribute must be provided by the client in plaintext. When a client retrieves a card PayFabric always returns this attribute in masked format. **When updating a card omit this field.**|  
| ExpDate*         | String | Expiration date of the credit card in the format of MMYY. Only valid for credit cards. |  
| CVC             | String | CVC code. Only valid for credit cards. |  
| StartDate       | Date   | Credit card start date. Only valid for credit cards. |  
| CheckNumber*     | String | Check number. Only valid for eChecks. |  
| AccountType*     | String | ACH account type. Only valid for ACH accounts. |  
| Aba*             | String | Bank Routing Number. Only valid for ACH accounts and eChecks. |  
| CardName        | String | Type of credit card: ``Visa``, ``Mastercard``, ``Discover``, etc. Only valid for credit cards. | 
| IsDefaultCard   | Boolean | Indicates whether this is the primary card of the customer. Default value is ``False``. |  
| IsLocked        | Boolean | Indicates whether the card is locked. Default value is ``False``.|  
| IsSaveCard      | Boolean | Indicates whether to save this card in the customer's wallet. This attribute is only valid and should only be included in the object when using [Create and Submit a Transaction by Transaction Object](https://github.com/PayFabric/APIs/wiki/API-Reference#create-and-submit-a-transaction-by-transaction-object). |  
| ModifiedOn      | Date | Timestamp indicating when this record was last modified. |  
| CardHolder*      | [Object](https://github.com/PayFabric/APIs/wiki/API-Objects#cardholder) | Cardholder object. |  
| Billto          | [Object](https://github.com/PayFabric/APIs/wiki/API-Objects#address) | Address object. The required rule of address object will apply once if it is not NULL.| 
| Identifier      | String | A client-defined identifier for this card. |  
| UserDefined1    | String | User-defined field 1 |  
| UserDefined2    | String | User-defined field 2 |  
| UserDefined3    | String | User-defined field 3 |  
| UserDefined4    | String | User-defined field 4 |  
*Required 

## Transaction Response
PayFabric returns the Transaction Response object as the result of most operations related to transactions. Most of the attributes of the object are forwarded from the Payment Gateway's response to the transaction.

| Attribute  | DataType| Definition
| :-----------|:---------| :---------| 
| TrxKey               | String | PayFabric transaction key. This is generated upon creation of the transaction in the PayFabric server. | 
| AuthCode             | String | Authorization code. Generated by the Payment Gateway. |
| Status               | String | Status of transaction. Generated by the Payment Gateway. Possible values are ``Approved``, ``Denied``, ``Declined``, ``Failure``, and ``More Info``. |  
| ResultCode           | String | Result code of the transaction. Generated by the Payment Gateway. |  
| Message              | String | Result message of the transaction. Generated by the Payment Gateway. |  
| OriginationID        | String | Unique identifier for the transaction. Generated by the Payment Gateway. |  
| TrxDate              | String | Date of transaction. |  
| RespTrxTag           | String | A tag value which is generated by FirstData, which must be included when submitting a transaction to FirstData. This is only valid if FirstData is the Payment Gateway. |  
| CVV2Response         | String | Verification status code of CVC code. Generated by the Payment Gateway. |  
| AVSZipResponse       | String | Verification status code of zip code. Generated by the Payment Gateway. |  
| AVSAddressResponse   | String | Verification status code of billing address. Generated by the Payment Gateway.|  
| IAVSAddressResponse  | String | Flag indicating that address verification has been ignored because the address is an international address. Generated by the Payment Gateway. |  

## STO
Simple Transaction Object. This is a lightweight object that only includes the required fields for retrieving a transaction object. 

| Attribute       | DataType| Definition
| :-----------    |:---------| :---------| 
| Key             | String | PayFabric transaction key. This is generated by PayFabric upon creation of the transaction.  | 
| OriginationID   | String | Unique identifier of the transaction. Generated by the Payment Gateway. |
| Status          | String | Status message indicating the status of the transaction. Possible values are ``Approved``, ``Denied``, ``Declined``, ``Failure``, ``More Info``. |  
| TrxDate         | String | Transaction date. |  
| Type            | String | Transaction type. The possible values are ``Sale``,``Book``,``Ship``,``Void``,``Credit``. | 

## Document
The Document object is used to represent additional invoice, order, or other Level 2/3 information. Some Payment Gateways require merchants to submit these transaction fields when processing transactions. 

| Attribute       | DataType| Definition
| :-----------    |:---------| :---------| 
| Head            | Array | An array of key-value pairs. Usually, the key-value pairs represent the level 2 fields to submit to the gateway.| 
| Lines           | Array | An array of columns object.The columns objects represent the columns that belong to a specific line. Usually the columns objects represent the level 3 fields that you can submit to the gateway.|
| Columns         | Array | An array of key-value pairs. The key-value pairs represent the level 3 fields to submit to the gateway.|
| UserDefined     | String | Up to 50 key value pairs can be stored in this object.| 

### Related Reading
* [Level 2 and Level 3 Fields](https://github.com/PayFabric/APIs/wiki/Level-2-and-Level-3-Fields)

## Transaction
The Transaction object represents a single transaction that will pass through PayFabric and be submitted to a Payment Gateway. It is probably the most important and most common object.

| Attribute  | DataType| Definition
| :-----------|:---------| :---------| 
| Key             | String | PayFabric transaction key. Generated by PayFabric and returned to the client upon creation of the transaction. Omit this field when creating a new transaction.  | 
| Amount*         | Float| Transaction amount |
| Customer*       | String | Customer ID |  
| Currency*       | String | Currency code, such as ``USD``. |  
| Card*  | [Object](https://github.com/PayFabric/APIs/wiki/API-Objects#card) | Card object. If you are using an existing card, you only need to specify the ID of the card. If using a new card then all fields are required. |  
| SetupId*        | String | Gateway account profile name. This name is configurable and is defined by the client on the PayFabric web portal. |  
| Tender*         | String | Tender type. Valid values are ``CreditCard``, ``ECheck``. |  
| Type*           | String | Transaction type. Valid values are ``Sale``,``Book``,``Ship``,``Void``,``Credit``.  For more information on PayFabric Transaction Types, see our [guide](https://github.com/PayFabric/Portal/wiki/Transaction-Types). |  
| BatchNumber     | String | Batch number name. For submitting multiple transactions in a single batch. |  
| ModifiedOn      | Date| Timestamp indicating when this transaction was last modified. |  
| Shipto   | [Object](https://github.com/PayFabric/APIs/wiki/API-Objects#address) | Address object. The required rule of address object will apply once if it is not NULL.| 
| ReqAuthCode          | String | Flag indicating whether to require an authentication code. This is required for ``Force`` transactions. |
| ReqOriginid          | String | Flag indicating whether to require Origin ID. This is required for ``Void`` and ``Ship`` transactions. |
| ReqTrxTag            | String | Flag indicating whether to require a transaction tag. This is required by FirstData for ``Void`` and ``Ship`` transactions. |
| TrxResponse | [Object](https://github.com/PayFabric/APIs/wiki/API-Objects#transaction-response) | Transaction response from Payment Gateway. |
| Document | [Object](https://github.com/PayFabric/APIs/wiki/API-Objects#document) | Level 2/3 transaction fields, as well as User Defined fields. |
| ReferenceTrxs        | Array  | Array of a [Simple Transaction Object](https://github.com/PayFabric/APIs/wiki/API-Objects#sto) which represents the original transactions. Value is Set if this transaction is a ref transaction.|
| TrxUserDefine1       | String | User Defined field 1 |
| TrxUserDefine2       | String | User Defined field 2 |
| TrxUserDefine3       | String | User Defined field 3 |
| TrxUserDefine4       | String | User Defined field 4 |

> The Required fields above only apply to transactions that will be submitted to Payment Gateways. If the transaction is only being saved on the PayFabric server (and not being submitted to a Payment Gateway) then none of the fields are required.

## Gateway Account
A Gateway Account is the account information of a single Payment Gateway. This is created by the merchant on the PayFabric server via the PayFabric web portal. See [Setup Gateway Account](https://github.com/PayFabric/Portal/wiki#setup-gateway-account) for more details.

| Attribute       | DataType| Definition
| :-----------    |:---------| :---------| 
| ID              | GUID   | Unique identifier for this record, provided by the merchant.  | 
| Name            | String | Gateway account profile name. |  
| Connector       | String | PayFabric gateway connector name. |  
| Processor       | String | Bank processor name. | 
| CardClass       | String | ``Credit`` or ``ECheck``  | 
| Fields          | Array  | An array of key value pair for the gateway fields|
